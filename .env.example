# Environment Configuration Template
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control

# ============================================================================
# MLFLOW CONFIGURATION
# ============================================================================

# MLflow Tracking Server URI (where experiments are logged)
# For local development: http://localhost:5000
# For remote: https://mlflow.company.com
MLFLOW_TRACKING_URI=http://localhost:5000

# MLflow Backend Store URI (where metadata is stored)
# For local: use default sqlite (leave empty)
# For PostgreSQL: postgresql://user:password@localhost:5432/mlflow
MLFLOW_BACKEND_STORE_URI=

# MLflow Artifact Store URI (where models/files are stored)
# For local: ./mlflow/artifacts (default)
# For S3: s3://bucket-name/mlflow-artifacts
# For Azure: abfs://container@account.dfs.core.windows.net/mlflow
MLFLOW_DEFAULT_ARTIFACT_ROOT=./mlflow/artifacts

# MLflow experiment name for tracking runs
MLFLOW_EXPERIMENT_NAME=credit-risk-model

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================

# Monitoring check interval (in minutes)
# How often to check for drift and run evaluation
MONITORING_INTERVAL_MINUTES=60

# Monitoring lookback window (in days)
# How many past days to analyze for drift
MONITORING_LOOKBACK_DAYS=30

# Reference data file paths
REFERENCE_DATA_PATH=monitoring/reference/reference_data.csv
REFERENCE_METADATA_PATH=monitoring/reference/reference_metadata.json

# Prediction storage
PREDICTIONS_PATH=monitoring/predictions/predictions.csv

# ============================================================================
# RETRAINING CONFIGURATION
# ============================================================================

# Evaluation Gate: Minimum F1 improvement percentage
# Candidate model must improve F1 by at least this % to pass
# Example: 2.0 means F1 must improve by 2 percentage points
EVAL_GATE_MIN_F1_IMPROVEMENT_PCT=2.0

# Evaluation Gate: Maximum Brier score degradation
# Candidate model's Brier score can increase by at most this amount
# Example: 0.01 means Brier can increase by 0.01 (stays under control)
EVAL_GATE_MAX_BRIER_DEGRADATION=0.01

# Retraining minimum samples required
# Won't trigger retraining if fewer labeled samples available
RETRAINING_MIN_LABELED_SAMPLES=100

# ============================================================================
# API CONFIGURATION
# ============================================================================

# API Host (0.0.0.0 for Docker, localhost for local)
API_HOST=0.0.0.0

# API Port
API_PORT=8000

# API Worker count (for production use)
API_WORKERS=4

# Enable API debug mode (true for development, false for production)
API_DEBUG=true

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# (Optional) PostgreSQL connection for storing predictions/labels
DB_HOST=localhost
DB_PORT=5432
DB_NAME=mlops_db
DB_USER=mlops_user
DB_PASSWORD=change_me_in_production

# ============================================================================
# DRIFT DETECTION CONFIGURATION
# ============================================================================

# Statistical test p-value threshold for drift detection
# Lower value = stricter (fewer false positives)
# Typical: 0.05 (5% significance level)
DRIFT_P_VALUE_THRESHOLD=0.05

# Effect size threshold for drift detection
# Measures practical significance beyond statistical significance
# Typical: 0.3 (small to medium effect size)
DRIFT_EFFECT_SIZE_THRESHOLD=0.3

# Minimum percentage of features drifting to trigger alert
# Example: 30 means alert if > 30% of features show drift
DRIFT_ALERT_THRESHOLD_PCT=50

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log directory
LOG_DIR=logs/

# Enable detailed logging (true for debugging, false for production)
DETAILED_LOGGING=false

# ============================================================================
# DATA VALIDATION CONFIGURATION
# ============================================================================

# Enable strict data validation (rejects invalid records)
# true = reject invalid; false = log warnings and continue
STRICT_VALIDATION=false

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Model promotion strategy
# "manual" = require explicit approval
# "automatic" = promote if gates pass
MODEL_PROMOTION_STRATEGY=manual

# ============================================================================
# EXTERNAL INTEGRATIONS (Optional)
# ============================================================================

# Slack webhook for alerts (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email for alerts (optional)
ALERT_EMAIL=mlops-team@company.com

# Cloud storage (AWS, Azure, GCP credentials)
# AWS
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1

# Azure
AZURE_STORAGE_ACCOUNT_NAME=
AZURE_STORAGE_ACCOUNT_KEY=

# ============================================================================
# DEVELOPMENT CONFIGURATION
# ============================================================================

# Jupyter notebook settings
JUPYTER_PORT=8888

# Testing configuration
PYTEST_MARKERS=unit,integration
PYTEST_TIMEOUT_SECONDS=300

# ============================================================================
# NOTES
# ============================================================================

# IMPORTANT: Never commit .env to version control!
# Add to .gitignore: .env
#
# For Docker Compose:
# - Place .env in project root
# - Docker Compose automatically loads these variables
#
# For Local Development:
# - Load with: source .env
# - Or: export $(cat .env | xargs)
#
# For Production:
# - Use secrets management (AWS Secrets Manager, Kubernetes, etc.)
# - Never use plaintext .env files
#
# Common Issues:
# 1. Variables not loading: Restart services after .env changes
# 2. Port conflicts: Check PORTS match available ports
# 3. Database connection: Verify credentials and network access
